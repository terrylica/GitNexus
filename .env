
# ========================================
# ENGINE CONFIGURATION
# ========================================

# Default engine to use ('legacy' or 'nextgen')
ENGINE_DEFAULT=nextgen

# Enable/disable engines
ENGINE_LEGACY_ENABLED=true
ENGINE_NEXTGEN_ENABLED=true

# Allow fallback between engines if one fails
ENGINE_ALLOW_FALLBACK=true

# Enable performance monitoring
ENGINE_PERFORMANCE_MONITORING=true

# Auto engine selection based on repository size (experimental)
ENGINE_AUTO_SELECTION=false

# Time threshold before falling back to another engine (ms)
ENGINE_FALLBACK_THRESHOLD_MS=10000

# ========================================
# LEGACY ENGINE CONFIGURATION
# ========================================

# Memory limits for Legacy engine
ENGINE_LEGACY_MEMORY_LIMIT_MB=512
ENGINE_LEGACY_GC_INTERVAL_MS=30000

# Processing settings for Legacy engine
ENGINE_LEGACY_BATCH_SIZE=10
ENGINE_LEGACY_TIMEOUT_MS=30000
ENGINE_LEGACY_USE_WORKERS=true

# ========================================
# PARALLEL PROCESSING CONFIGURATION
# ========================================

# Worker pool settings for parallel processing mode
PARALLEL_MAX_WORKERS=4
PARALLEL_BATCH_SIZE=20
PARALLEL_WORKER_TIMEOUT_MS=60000

# ========================================
# PARSING MODE CONFIGURATION
# ========================================

# Choose parsing approach: 'parallel' for multi-threaded workers, 'single' for single-threaded
# - parallel: Uses Web Workers for faster processing (recommended for large projects)
# - single: Uses main thread processing (more stable, good for debugging)
# Note: VITE_ prefix is required for Vite to expose this to the client
VITE_PARSING_MODE=parallel

# ========================================
# GENERAL APPLICATION CONFIGURATION
# ========================================

# GitHub token for API access (increases rate limits)
GITHUB_TOKEN=your_github_token_here

# Logging level
LOG_LEVEL=info

# Enable performance metrics
LOG_ENABLE_METRICS=true
LOG_ENABLE_PERFORMANCE=true

# Memory configuration
MEMORY_MAX_MB=512
MEMORY_CLEANUP_THRESHOLD_MB=400

# ========================================
# EXAMPLES AND RECOMMENDED CONFIGURATIONS
# ========================================

# For large repositories (use parallel processing):
# VITE_PARSING_MODE=parallel
# PARALLEL_MAX_WORKERS=8
# PARALLEL_BATCH_SIZE=50

# For stable processing (use single-threaded):
# VITE_PARSING_MODE=single
# MEMORY_MAX_MB=1024

# For development/testing (use parallel with debugging):
# VITE_PARSING_MODE=parallel
# LOG_LEVEL=info
# LOG_ENABLE_PERFORMANCE=true

# For production (stable single-threaded):
# VITE_PARSING_MODE=single
# LOG_LEVEL=warn

# ========================================
# QUICK CONFIGURATION EXAMPLES
# ========================================

# To use single-threaded processing (for debugging or stability):
# VITE_PARSING_MODE=single

# To use parallel processing (for performance):
# VITE_PARSING_MODE=parallel

# To switch between modes, just change VITE_PARSING_MODE and restart the server

# ========================================
# KUZU DB CONFIGURATION
# ========================================

# Enable KuzuDB dual-write mode (stores data in both JSON and KuzuDB)
# Values: true/false, 1/0, yes/no
VITE_KUZU_ENABLED=true
# KuzuDB is now enabled! This will:
# - Write data to both JSON (primary) and KuzuDB (secondary)  
# - Provide enhanced logging and statistics
# - Gracefully fall back to JSON-only if KuzuDB fails
# - Maintain full backward compatibility

# To disable KuzuDB and use JSON-only:
# VITE_KUZU_ENABLED=false